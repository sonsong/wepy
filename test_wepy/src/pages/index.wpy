<template>
    <view class="container">
        <view class="userinfo" @tap="handleViewTap">
            <image class="userinfo-avatar" src="{{ userInfo.avatarUrl }}" background-size="cover"/>
            <view class="userinfo-nickname">{{ userInfo.nickName }}</view>
        </view>
        <view>
            <button type="primary" @tap="skipTodoPage">skip todo page</button>
        </view>
    </view>
</template>

<script>
    import wepy from 'wepy'

    export default class Index extends wepy.page {
        config = {
            navigationBarTitleText: 'Index'
        }

        //子组件注册
        components = {

        }

        mixins = []

        data = {
            userInfo: {
                nickName: '加载中...'
            }
        }

        computed = {

        }

        //wxml事件处理函数对象，存放响应wxml中所捕获到的事件的函数，如bindtap、bindchange
        methods = {
            skipTodoPage(){
                wx.redirectTo({
                    url:"./todo"
                });
            }
        }

        //父子组件之间的事件函数放在这
        events = {

        }

        onLoad() {
            let that = this
            this.$parent.getUserInfo(function (userInfo) {
                if (userInfo) {
                    that.userInfo = userInfo
                }
            })
        }
    }
</script>
<style lang="less" scoped>
    .userinfo {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .userinfo-avatar {
        width: 80rpx;
        height: 80rpx;
        border-radius: 50%;
    }

    .userinfo-nickname {
        color: #aaa;
    }
</style>
